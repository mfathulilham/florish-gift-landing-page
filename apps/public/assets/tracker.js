class AllAccessTracker{constructor(e){this.id=e,this.onViewListener=this.onView.bind(this),this.onClickListener=this.onClick}postAjax(e,t,n){var i="string"==typeof t?t:Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return r.open("POST",e),r.onreadystatechange=function(){r.readyState>3&&200==r.status&&n(r.responseText)},r.setRequestHeader("Content-Type","application/json"),r.send(i),r}sendData(e,t,n){var i=document.cookie.match(/_ga=(.+?);/)[1].split(".").slice(-2).join("."),r="https://www.google-analytics.com/collect?v=1&t=event&tid="+this.id+"&cid="+i+"&ec="+e+"&ea="+t+"&el="+n+"&ni=1";fetch(r,{method:"POST"})}isInViewport(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}onView(){var e=this;document.querySelectorAll("[data-tracker-view='true']").forEach(function(t,n){var i=t.dataset.trackerViewed;if(e.isInViewport(t)&&"true"!=i){var r=t.dataset.trackerEc,a=t.dataset.trackerEa,c=t.dataset.trackerEl;t.dataset.trackerViewed="true",tracker.sendData(r,a,c)}})}initViewListener(){document.addEventListener("scroll",this.onViewListener,{passive:!0})}destroyViewListener(){document.removeEventListener("scroll",this.onViewListener)}onClick(e){var t=e.dataset.trackerEc,n=e.dataset.trackerEa,i=e.dataset.trackerEl;tracker.sendData(t,n,i)}initClickListener(){var e=this;document.addEventListener("click",function(t){t.target&&t.target.dataset&&"true"==t.target.dataset.trackerClick&&e.onClick(t.target)})}}